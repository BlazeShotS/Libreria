{% extends "base.html" %}

{% block titulo %} Categorias {% endblock %}

{% block contenido %}

<h1>Categor√≠as</h1>

{% for categoria in categorias %}
  <section>
    <h2>
      <a href="{% url 'libreria:categorias_detalle' categoria.id %}">{{ categoria.nombre }}</a>
    </h2>
    <p>{{ categoria.descripcion }}</p>

    <div style="display:flex; gap:15px; flex-wrap:wrap;">
      {% for libro in categoria.libro_set.all|slice:":5" %} <!--Esto quiere decir, dame todo los libros que pertenecen a esa categoria , y como esta relacionado pk con fk nos da-->
        <div style="width:180px; border:1px solid #ccc; padding:10px; text-align:center;">
          {% if libro.imagen %}
            <img src="{{ libro.imagen.url }}" alt="{{ libro.titulo }}" style="max-width:100%; height:200px; object-fit:cover;">
          {% endif %}
          <h4>{{ libro.titulo }}</h4>
          <p>Precio: ${{ libro.precio }}</p>
        </div>
      {% endfor %}
    </div>

    <a href="{% url 'libreria:categorias_detalle' categoria.id %}">Ver todos los libros de {{ categoria.nombre }}</a>
  </section>
{% endfor %}


{% endblock %}