{% extends "base.html" %}

{% block titulo %} Categorias {% endblock %}

{% block contenido %}

<h1 class="categorias-titulo">Categor√≠as</h1>

{% for categoria in categorias %}
  <section class="categoria">
    <h2 class="categoria-nombre">
      <a href="{% url 'libreria:categorias_detalle' categoria.id %}">
        {{ categoria.nombre }}
      </a>
    </h2>
    <p class="categoria-descripcion">{{ categoria.descripcion }}</p>

    <div class="libros-slider">
      <div class="libros-contenedor" id="slider-{{ categoria.id }}">
        {% for libro in categoria.libro_set.all|slice:":5" %}
          <div class="libro-card">
            {% if libro.imagen %}
              <img src="{{ libro.imagen.url }}" alt="{{ libro.titulo }}" class="libro-imagen">
            {% endif %}
            <h4 class="libro-titulo">{{ libro.titulo }}</h4>
            <p class="libro-precio">S/ {{ libro.precio }}</p>
          </div>
        {% endfor %}
      </div>
    </div>

    <a href="{% url 'libreria:categorias_detalle' categoria.id %}" class="ver-mas">
      Ver todos los libros de {{ categoria.nombre }}
    </a>
  </section>
{% endfor %}


<script>
  document.addEventListener("DOMContentLoaded", () => {
    const sliders = document.querySelectorAll(".libros-contenedor");

    sliders.forEach(slider => {
      let index = 0;
      const cards = slider.children;
      const total = cards.length;

      setInterval(() => {
        index = (index + 1) % total;
        slider.style.transform = `translateX(-${index * 195}px)`; 
        // 180px ancho + 15px gap
      }, 5000);
    });
  });
</script>



{% endblock %}